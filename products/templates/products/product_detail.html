{% extends "base.html" %}
{% load static %}

{% block content %}

<!-- content wrappers -->
<div class="uk-container uk-container-medium">
  <div class="uk-width-expand">
    <div class="uk-grid-small custom-product-flex" uk-grid>

      <!-- PRODUCT IMAGE -->
      <div class="uk-card uk-card-default uk-padding-remove-left">
        <div class="uk-card-media">
          {% if product.image %}
            <!-- uikit LIGHTBOX -->
            <div uk-lightbox="animate: fade">
              <a href="{{ product.image.url }}">
                <img src="{{ product.image.url }}" 
                   width="500" 
                     alt="{{ product.name }}">
              </a>
            </div>
          {% else %}
            <img src="{% static 'images/noimage.png' %}" 
               width="500" 
                 alt="{{ product.name }}">
          {% endif %}
        </div>
      </div>

      <!-- PRODUCT INFO -->
      <div class="uk-card-body uk-margin-left uk-width-large">
        <div class="uk-text-left uk-text-large uk-text-bold uk-width-large">
          {{ product.name }}
        </div>
        <div class="uk-text-left uk-text-bold uk-margin-small-top">
          ${{ product.price }}
        </div>
        <div class="uk-text-left uk-text-small uk-text-secondary uk-margin-small-top">
          Category: {{ product.category.friendly_name }}
        </div>
        <div class="uk-text-left uk-text-small uk-text-secondary">
          Views {{ product.views }}
        </div>
        <div class="uk-text-left uk-text-small uk-width-large uk-margin-small-top">
          {{ product.description }}
        </div>

        <!-- ADD TO CART form and button -->
        <div>
          <p class="uk-margin-medium-top" uk-margin>
            <form action="{% url 'add_to_bag' product.id %}" method="POST">
              <!-- Secure Django token -->
              {% csrf_token %}
              <!-- Size, format info -->
              {% with product.has_formats as s %}
                {% if s %}
                  <div class="uk-margin">
                    <select class="uk-select uk-form-small uk-form-width-medium"
                             name="product_size"
                               id="id_product_size">
                      <option value="A4">Print Format A4</option>
                      <option value="A3" selected>Print Format A3</option>
                      <option value="A2">Print Format A2</option>
                    </select>
                  </div>
                {% endif %}
              {% endwith %}
              <div class="uk-margin uk-width-small">
                <!-- Input field -->
                <input class="uk-input uk-form-small uk-width-1-2"
                        type="number"
                        name="quantity"
                       value="1"
                         min="1"
                         max="99"
                data-item_id="{{ product_id }}"
                          id="id_qty_{{ product.id }}">
              </div>
              <div>
                <!-- Submit button -->
                <button class="uk-button uk-button-secondary uk-border-pill"
                         type="submit">
                  Add to Bag
                </button>
                <!-- Link to contact page -->
                <button class="uk-button 
                               uk-button-text 
                               uk-text-capitalize 
                               uk-margin-left">
                  Request custom artwork
                </button>
                <!-- Redirection link to this page -->
                <input type="hidden"
                       name="redirect_url"
                      value="{{ request.path }}">
              </div>
            </form>
          </p>
        </div>

        <!-- RATINGS -->
        <div class="uk-text-small uk-margin-large-top">
          <!-- Likes -->
          <span>
            <a href="#" 
               class="uk-button uk-button-default uk-button-small uk-border-pill">
               Like 
            </a>
          </span>
          <span class="uk-text-muted">
            {{ product.likes }}
          </span><br>
          <!-- TOGGLE comments -->
          <span>
            <a href="#toggle-animation" 
               uk-toggle="target: #toggle-animation; animation: uk-animation-slide-bottom"
               class="uk-button uk-button-default uk-button-small uk-border-pill uk-margin-small-top">
               Comment </a>
          </span>
          <span class="uk-text-muted uk-margin-small-top">
            ({{ product.comment }})
          </span><br>
        </div>

        <!-- Comments toggled -->
        <div id="toggle-animation" 
             class="uk-card uk-card-default uk-card-body uk-margin-small" hidden>
             Animation
        </div>
      <!-- END of product info -->
      </div>
    <!-- END of content wrappers -->
    </div>
  </div>
</div>

{% endblock %}